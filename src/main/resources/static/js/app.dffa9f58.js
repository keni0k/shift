(function(t){function a(a){for(var s,o,n=a[0],l=a[1],c=a[2],d=0,p=[];d<n.length;d++)o=n[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(a);while(p.length)p.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,a=0;a<r.length;a++){for(var e=r[a],s=!0,n=1;n<e.length;n++){var l=e[n];0!==i[l]&&(s=!1)}s&&(r.splice(a--,1),t=o(o.s=e[0]))}return t}var s={},i={app:0},r=[];function o(a){if(s[a])return s[a].exports;var e=s[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=s,o.d=function(t,a,e){o.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,a){if(1&a&&(t=o(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var s in t)o.d(e,s,function(a){return t[a]}.bind(null,s));return e},o.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(a,"a",a),a},o.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=a,n=n.slice();for(var c=0;c<n.length;c++)a(n[c]);var u=l;r.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var s=e("85ec"),i=e.n(s);i.a},"56d7":function(t,a,e){"use strict";e.r(a);e("e260"),e("e6cf"),e("cca6"),e("a79d");var s=e("2b0e"),i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("img",{staticClass:"app-img",attrs:{src:"https://www.mysecretsanta.me/assets/i/snowflake.png"}}),t._m(0),e("div",{staticClass:"accordion"},[e("div",{staticClass:"accordion-item",class:{active:t.isActive},on:{click:function(a){t.isActive=!0}}},[e("router-link",{staticClass:"heading",attrs:{to:"/subscribe"}},[e("div",{staticClass:"title"},[t._v("Присоединиться к группе")])]),e("div",{staticClass:"content",class:{initial:t.isActive}},[t.isActive?e("router-view"):t._e()],1)],1),e("div",{staticClass:"accordion-item",class:{active:!t.isActive},on:{click:function(a){t.isActive=!1}}},[e("router-link",{staticClass:"heading",attrs:{to:"/add"}},[e("div",{staticClass:"title"},[t._v("Создать группу")])]),e("div",{staticClass:"content",class:{initial:!t.isActive}},[t.isActive?t._e():e("router-view")],1)],1)]),t._m(1)])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("header",{staticClass:"header"},[e("h1",[t._v("Welcome to Secret Santa!")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("footer",[t._v("by: "),e("a",{attrs:{href:"https://vk.com/keni0k",target:"_blank"}},[t._v("@keni0k")])])}],o=(e("b0c0"),{name:"app",data:function(){return{isActive:"subscribe"===this.$route.name}}}),n=o,l=(e("034f"),e("5c64"),e("2877")),c=Object(l["a"])(n,i,r,!1,null,null,null),u=c.exports,d=e("bc3a"),p=e.n(d),v=e("a7fe"),m=e.n(v),f=e("8c4f"),_=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div")},b=[],h={name:"Main"},g=h,k=Object(l["a"])(g,_,b,!1,null,null,null),C=k.exports,w=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",[null==this.$route.params.id?e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-8 mx-auto subscribe"},[e("label",{attrs:{for:"group_link"}},[t._v("Пригласительная ссылка")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.group_link,expression:"group_link"}],staticClass:"form-control",attrs:{type:"text",id:"group_link"},domProps:{value:t.group_link},on:{input:function(a){a.target.composing||(t.group_link=a.target.value)}}}),e("button",{staticClass:"btn btn-primary invite-btn",attrs:{type:"button"},on:{click:function(a){return t.get_group()}}},[t._v("Найти ")])])]):t._e(),t.is_active?e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-3"},[e("label",{attrs:{for:"user_name"}},[t._v("Ваше имя")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user_name,expression:"user_name"}],staticClass:"form-control",attrs:{type:"text",id:"user_name"},domProps:{value:t.user_name},on:{input:function(a){a.target.composing||(t.user_name=a.target.value)}}})]),e("div",{staticClass:"form-group col-md-3"},[e("label",{attrs:{for:"likes"}},[t._v("Ваши предпочтения")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user_likes,expression:"user_likes"}],staticClass:"form-control",attrs:{id:"likes",rows:"3"},domProps:{value:t.user_likes},on:{input:function(a){a.target.composing||(t.user_likes=a.target.value)}}})]),e("div",{staticClass:"form-group col-md-3"},[e("label",{attrs:{for:"dislikes"}},[t._v("Что лучше не дарить")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user_dislikes,expression:"user_dislikes"}],staticClass:"form-control",attrs:{id:"dislikes",rows:"3"},domProps:{value:t.user_dislikes},on:{input:function(a){a.target.composing||(t.user_dislikes=a.target.value)}}})]),e("div",{staticClass:"col-md-3"},[e("button",{staticClass:"btn btn-primary invite-btn",attrs:{type:"button"},on:{click:function(a){return t.subscribe()},keyup:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.showModal=!1}}},[t._v("Присоединиться ")])])])]):t._e()]),e("div",{attrs:{id:"modalSubscribe"}},[e("transition",{on:{enter:t.startTransitionModal,"after-enter":t.endTransitionModal,"before-leave":t.endTransitionModal,"after-leave":t.startTransitionModal}},[t.showModal?e("div",{ref:"modal",staticClass:"modal fade",on:{click:function(a){if(a.target!==a.currentTarget)return null;t.showModal=!1}}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Заявка отправлена!")]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(a){t.showModal=!1}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[null==t.user?e("div",[t._v("Ожидайте распределение "),e("div",{attrs:{id:"circularG"}},[e("div",{staticClass:"circularG",attrs:{id:"circularG_1"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_2"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_3"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_4"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_5"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_6"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_7"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_8"}})])]):t._e(),null!=t.user?e("div",[t._v(" "+t._s(t.user)+" ")]):t._e()]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",on:{click:function(a){t.showModal=!1}}},[t._v("Выйти")])])])])]):t._e()]),e("div",{ref:"backdrop",staticClass:"modal-backdrop fade d-none"})],1)])},y=[];s["a"].prototype.$axios=p.a;var G={name:"subscription",data:function(){return{group_link:"",is_active:!1,user_name:"",user_likes:"",user_dislikes:"",showModal:!1,user:null,user_id:null}},methods:{get_group:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.group_link,a=this;p.a.get(t).then((function(t){a.is_active=null!=t.data.value,a.is_active||alert("Пригласительная ссылка недействительна")}))},subscribe:function(){var t=this,a={params:{user_name:this.user_name,user_likes:this.user_likes,user_dislikes:this.user_dislikes}};p.a.get(this.group_link,a).then((function(a){t.showModal=!0,alert(a.data),t.user_id=parseInt(a.data)})).catch((function(){alert("Пригласительная ссылка недействительна")}))},startTransitionModal:function(){this.$refs.backdrop.classList.toggle("d-block"),this.$refs.modal.classList.toggle("d-block")},endTransitionModal:function(){this.$refs.backdrop.classList.toggle("show"),this.$refs.modal.classList.toggle("show")},getTarget:function(){var t=this;p.a.get("https://secretsanta2020.herokuapp.com/api/v001/users/"+this.user_id).then((function(a){t.user=JSON.parse(a.data)}))},stopTimer:function(){this.interval&&window.clearInterval(this.interval)},startTimer:function(){var t=this;this.stopTimer(),this.interval=window.setInterval((function(){t.getTarget()}),1e3)}},mounted:function(){null!=this.$route.params.id&&this.get_group("https://secretsanta2020.herokuapp.com/subscription/"+this.$route.params.id),this.startTimer()},beforeDestroy:function(){this.stopTimer()}},M=G,x=(e("90a3"),Object(l["a"])(M,w,y,!1,null,"24a75eec",null)),T=x.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",[e("div",{staticClass:"row"},[e("div",{staticClass:"form-group col-md-4"},[e("label",{attrs:{for:"user_name"}},[t._v("Ваше имя")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user_name,expression:"user_name"}],staticClass:"form-control",attrs:{type:"text",id:"user_name"},domProps:{value:t.user_name},on:{input:function(a){a.target.composing||(t.user_name=a.target.value)}}})]),e("div",{staticClass:"form-group col-md-4"},[e("label",{attrs:{for:"group_name"}},[t._v("Название группы")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.group_name,expression:"group_name"}],staticClass:"form-control",attrs:{type:"text",id:"group_name"},domProps:{value:t.group_name},on:{input:function(a){a.target.composing||(t.group_name=a.target.value)}}})]),e("div",{staticClass:"form-group col-md-2"},[e("label",{staticStyle:{"font-size":"0.9rem"},attrs:{for:"count_people"}},[t._v("Количество людей")]),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.count_people,expression:"count_people",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",id:"count_people"},domProps:{value:t.count_people},on:{input:function(a){a.target.composing||(t.count_people=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}})]),e("div",{staticClass:"col-md-2"},[e("button",{staticClass:"btn btn-primary invite-btn",attrs:{type:"button"},on:{click:function(a){return t.add_group()},keyup:function(a){if(!a.type.indexOf("key")&&t._k(a.keyCode,"esc",27,a.key,["Esc","Escape"]))return null;t.showModal=!1}}},[t._v("Создать ")])])])]),e("div",{attrs:{id:"exampleModal"}},[e("transition",{on:{enter:t.startTransitionModal,"after-enter":t.endTransitionModal,"before-leave":t.endTransitionModal,"after-leave":t.startTransitionModal}},[t.showModal?e("div",{ref:"modal",staticClass:"modal fade",on:{click:function(a){if(a.target!==a.currentTarget)return null;t.showModal=!1}}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v("Модерация группы")]),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(a){t.showModal=!1}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),e("div",{staticClass:"modal-body"},[e("div",[t._v("Ссылка: "),e("a",{attrs:{href:t.link_to_subscribe}},[t._v(" "+t._s(t.link_to_subscribe.substr(8))+" ")])]),e("div",{attrs:{id:"circularG"}},[e("div",{staticClass:"circularG",attrs:{id:"circularG_1"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_2"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_3"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_4"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_5"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_6"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_7"}}),e("div",{staticClass:"circularG",attrs:{id:"circularG_8"}})])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-secondary",on:{click:function(a){t.showModal=!1}}},[t._v("Выйти")])])])])]):t._e()]),e("div",{ref:"backdrop",staticClass:"modal-backdrop fade d-none"})],1)])},O=[];s["a"].prototype.$axios=p.a;var P={name:"add_group",data:function(){return{showModal:!1,user_name:"",group_name:"",count_people:0,link_to_subscribe:""}},methods:{add_group:function(){var t=this;p.a.post("https://secretsanta2020.herokuapp.com/api/v001/groups/without_user_id",null,{params:{user_name:this.user_name,name:this.group_name,count_people:this.count_people}}).then((function(a){t.showModal=!0,t.link_to_subscribe=a.data}))},startTransitionModal:function(){this.$refs.backdrop.classList.toggle("d-block"),this.$refs.modal.classList.toggle("d-block")},endTransitionModal:function(){this.$refs.backdrop.classList.toggle("show"),this.$refs.modal.classList.toggle("show")}}},j=P,A=(e("bccc"),Object(l["a"])(j,$,O,!1,null,"96172d38",null)),E=A.exports;s["a"].use(f["a"],m.a,p.a);var L=[{path:"/",component:C,name:"main"},{path:"/subscribe/:id",component:T,name:"subscribe"},{path:"/subscribe",component:T,name:"subscribe"},{path:"/add",component:E,name:"add"}],S=new f["a"]({routes:L,mode:"history"});s["a"].config.productionTip=!1,new s["a"]({el:"#app",components:{App:u},router:S,render:function(t){return t(u)}}).$mount("#app")},"5c64":function(t,a,e){"use strict";var s=e("d32a"),i=e.n(s);i.a},"5d53":function(t,a,e){},"85ec":function(t,a,e){},"90a3":function(t,a,e){"use strict";var s=e("fc6e"),i=e.n(s);i.a},bccc:function(t,a,e){"use strict";var s=e("5d53"),i=e.n(s);i.a},d32a:function(t,a,e){},fc6e:function(t,a,e){}});
//# sourceMappingURL=app.dffa9f58.js.map